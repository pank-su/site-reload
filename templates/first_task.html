<!doctype html>
<html lang="ru">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:title" content="PHHask">
    <meta property="og:site_name" content="PHHask">
    <meta property="og:url" content="https://phhask.space/">
    <meta property="og:description" content="Это сайт для решения однотипных задач по физике.">
    <meta property="og:image" content="{{ url_for('static', filename='images/ico2.png')}}">
    <meta name="yandex-verification" content="c3d1bacbc9c1efc0"/>

    <!-- Bootstrap CSS -->
    <link href="{{ url_for('static', filename='css/bootstrap.min.css')}}" rel="stylesheet"
          integrity="" crossorigin="anonymous">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css')}}">
    <link rel="icon" href="{{ url_for('static', filename='images/ico2.png')}}" type="image/png">
    <script type="text/javascript" src="{{ url_for('static', filename='js/jquery-3.5.1.min.js')}}"></script>
    <script src="{{ url_for('static', filename='js/bootstrap-input-spinner.js')}}"></script>


    <title>PHHask</title>
    <meta name="Description"
          content="Это сайт для решение однотипных задач по физике, где надо найти токи в нескольких ветвях между двумя узлами."/>

</head>
<body>
<!-- Yandex.Metrika counter -->
<script type="text/javascript">
    (function (m, e, t, r, i, k, a) {
        m[i] = m[i] || function () {
            (m[i].a = m[i].a || []).push(arguments)
        };
        m[i].l = 1 * new Date();
        k = e.createElement(t), a = e.getElementsByTagName(t)[0], k.async = 1, k.src = r, a.parentNode.insertBefore(k, a)
    })
    (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

    ym(72782878, "init", {
        clickmap: true,
        trackLinks: true,
        accurateTrackBounce: true,
        webvisor: true
    });
</script>
<noscript>
    <div><img src="https://mc.yandex.ru/watch/72782878" style="position:absolute; left:-9999px;" alt=""/></div>
</noscript>
<!-- /Yandex.Metrika counter -->
<script>
    var last_num_numbers = 3;


    function lines_(num) {
        let array = []
        let lines_num = document.forms[0].elements.lines.value
        for (let i = 0; i < lines_num + 1; i++) {

            el = document.getElementById(i.toString())
            try {
                let elementChildrens = el.children
                if (elementChildrens.length === 3) {
                    for (let i = 0; i < elementChildrens.length; i++) {
                        array.push(elementChildrens[i].value)
                    }
                }
            } catch (e) {
                console.log(e)
            }

        }
        num = parseInt(num)
        if (num >= 2) {
            last_num_numbers += 1
            document.getElementById("lines").innerHTML = ''
            num += 1
            for (let g = 1; g < num; g++) {
                document.getElementById("lines").insertAdjacentHTML("beforeend", '<div class="input-group pb-1" id="' + g.toString() + '"> <input type="number" class="form-control" aria-label="Text input with dropdown button" placeholder="Сопротивление" name="' + g.toString() + 'R"> <select class="form-select" aria-label="Default select example" name="' + g.toString() + 'D"> <option selected>Направление</option> <option value="L">L</option> <option value="R">R</option> </select> <input type="number" class="form-control" aria-label="Text input with dropdown button" placeholder="Вольтаж" name="' + g.toString() + 'V"> </div>');
            }
            let lines_num = document.forms[0].elements.lines.value
            for (let i = 1; i < lines_num + 1; i++) {

                el = document.getElementById(i.toString())
                try {
                    if (array.length == 0) {
                        break
                    }
                    let elementChildrens = el.children
                    if (elementChildrens.length === 3) {
                        for (let i = 0; i < elementChildrens.length; i++) {
                            elementChildrens[i].value = array.shift()
                        }
                    }
                } catch (e) {
                    console.log(e)
                }

            }

        }
        last_num_numbers = num - 1

    }
</script>
<form action="/phys/task_1" method="post">
    <div class="p-3" id="0">

        <input data-prefix="Колличество ветвей" name="lines" type="number" min=2 class="form-control" aria-label=""
               value=3 onchange="lines_(this.value)">

    </div>
<div class="px-3" id="lines">
    <div class="input-group pb-1" id="1">
        <input type="number" class="form-control" aria-label="Text input with dropdown button"
               placeholder="Сопротивление" name="1R">
        <select class="form-select" aria-label="Default select example" name="1D">
            <option selected>Направление</option>
            <option value="L">L</option>
            <option value="R">R</option>
        </select>
        <input type="number" class="form-control" aria-label="Text input with dropdown button" placeholder="Вольтаж" name="1V">
    </div>
    <div class="input-group pb-1" id="2">
        <input type="number" class="form-control" aria-label="Text input with dropdown button"
               placeholder="Сопротивление" name="2R">
        <select class="form-select" aria-label="Default select example" name="2D">
            <option selected>Направление</option>
            <option value="L">L</option>
            <option value="R">R</option>
        </select>
        <input type="number" class="form-control" aria-label="Text input w3th dropdown button" placeholder="Вольтаж" name="2V">
    </div>
    <div class="input-group pb-1" id="3">
        <input type="number" class="form-control" aria-label="Text input with dropdown button"
               placeholder="Сопротивление" name="3R">
        <select class="form-select" aria-label="Default select example" name="3D">
            <option selected>Направление</option>
            <option value="L">L</option>
            <option value="R">R</option>
        </select>

        <input type="number" class="form-control" aria-label="Text input with dropdown button" placeholder="Вольтаж" name="3V">
    </div>
</div>

<div class="d-flex flex-row-reverse px-3 pb-2" id="4">

    <button class="btn btn-outline-primary" type="submit" >Решить</button>

</div>

</form>
<!--<div class="accordion px-3" id="accordionExample">-->
<!--    <div class="accordion-item">-->
<!--        <h2 class="accordion-header" id="Table_head">-->
<!--            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"-->
<!--                    data-bs-target="#Table_collapse" aria-expanded="true" aria-controls="collapseOne">-->
<!--                Сводная таблица-->
<!--            </button>-->
<!--        </h2>-->
<!--        <div id="Table_collapse" class="accordion-collapse collapse" aria-labelledby="Table_head"-->
<!--             data-bs-parent="#accordionExample">-->

<!--        </div>-->
<!--    </div>-->
<!--    <div class="accordion-item">-->
<!--        <h2 class="accordion-header" id="headingOne">-->
<!--            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"-->
<!--                    data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">-->
<!--                MУH-->
<!--            </button>-->
<!--        </h2>-->
<!--        <div id="collapseOne" class="accordion-collapse collapse" aria-labelledby="headingOne"-->
<!--             data-bs-parent="#accordionExample">-->
<!--            <div class="accordion-body" id="MYH">-->
<!--                Нажми на 'решить', чтобы тут появился ответ.-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->
<!--    <div class="accordion-item">-->
<!--        <h2 class="accordion-header" id="headingTwo">-->
<!--            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"-->
<!--                    data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">-->
<!--                MH-->
<!--            </button>-->
<!--        </h2>-->
<!--        <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo"-->
<!--             data-bs-parent="#accordionExample">-->
<!--            <div class="accordion-body" id="MH">-->
<!--                Нажми на 'решить', чтобы тут появился ответ.-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->
<!--    <div class="accordion-item">-->
<!--        <h2 class="accordion-header" id="headingThree">-->
<!--            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"-->
<!--                    data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">-->
<!--                MКУ(МУКУ)-->
<!--            </button>-->
<!--        </h2>-->
<!--        <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree"-->
<!--             data-bs-parent="#accordionExample">-->
<!--            <div class="accordion-body" id="MKY">-->
<!--                Нажми на 'решить', чтобы тут появился ответ.-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->
<!--</div>-->
<footer class="py-2 d-flex justify-content-center" id='footer'>
    <a href="https://github.com/Cynep-SU">
        <img src="{{ url_for('static', filename='images/pankoff.png')}}" alt="HTML tutorial" style="width:78px;height:78px;">
    </a>
</footer>
<!-- Optional JavaScript; choose one of the two! -->

<!-- Option 1: Bootstrap Bundle with Popper -->
<script src="{{ url_for('static', filename='js/bootstrap.bundle.min.js')}}"
        integrity=""
        crossorigin="anonymous"></script>

<!-- Option 2: Separate Popper and Bootstrap JS -->
<!--
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js" integrity="sha384-q2kxQ16AaE6UbzuKqyBE9/u/KzioAlnx2maXQHiDX9d4/zp8Ok3f+M7DPm+Ib6IU" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.min.js" integrity="sha384-pQQkAEnwaBkjpqZ8RU1fF1AKtTcHJwFl3pblpTlHXybJjHpMYo79HY3hIi4NKxyj" crossorigin="anonymous"></script>
-->
</body>
<script>
    $("input[name='lines']").inputSpinner({
        template: '<div class="input-group ${groupClass}">\n' +
            '<div class="input-group-prepend"></div>\n' +
            '<input type="text" inputmode="decimal" style="text-align: ${textAlign}" class="form-control"/>\n' +
            '<div class="input-group-append">\n' +
            '<button style="min-width: ${buttonsWidth}" class="btn btn-decrement ${buttonsClass}" type="button">${decrementButton}</button>\n' +
            '<button style="min-width: ${buttonsWidth}" class="btn btn-increment ${buttonsClass}" type="button">${incrementButton}</button>\n' +
            '</div></div>'
    })

    function getXmlHttp() {
        var xmlhttp;
        try {
            xmlhttp = new ActiveXObject("Msxml2.XMLHTTP");
        } catch (e) {
            try {
                xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
            } catch (E) {
                xmlhttp = false;
            }
        }
        if (!xmlhttp && typeof XMLHttpRequest != 'undefined') {
            xmlhttp = new XMLHttpRequest();
        }
        return xmlhttp;
    }

    var xhr = new XMLHttpRequest();


    function decide() {
        let array = []
        let lines_num = document.forms[0].elements.lines.value
        for (let i = 0; i < lines_num + 1; i++) {

            el = document.getElementById(i.toString())
            try {
                let elementChildrens = el.children
                if (elementChildrens.length === 3) {
                    for (let i = 0; i < elementChildrens.length; i++) {
                        if (elementChildrens[i].value == '' || elementChildrens[i].value == 'Направление') {
                            alert('Мне кажется что ты забыл где-то указать значения.')
                            return
                        }
                        array.push(elementChildrens[i].value)
                    }
                }
            } catch (e) {
                console.log(e)
            }

        }

        xhr.open('POST', 'https://b2a076121e8e.ngrok.io/phys_program', false);
        xhr.send(array);
        if (xhr.status != 200) {
            alert(xhr.status + ': ' + xhr.statusText);
        } else {
            document.getElementById('MYH').innerText = JSON.parse(xhr.responseText).MYH
            document.getElementById('MH').innerText = JSON.parse(xhr.responseText).MH
            document.getElementById('MKY').innerText = JSON.parse(xhr.responseText).MYKY;
            document.getElementById('Table_collapse').innerHTML = JSON.parse(xhr.responseText).html
            $("button[data-bs-target='#Table_collapse']").removeClass('accordion-button collapsed')
            $("button[data-bs-target='#Table_collapse']").addClass('accordion-button')
            $("#Table_collapse").removeClass("accordion-collapse collapse")
            $("#Table_collapse").addClass("accordion-collapse collapse show")
        }

    }
</script>
</html>
